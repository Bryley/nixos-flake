#!/usr/bin/env bash
set -euo pipefail

# Make the switch look nicer (optional but feels great)
niri msg action do-screen-transition >/dev/null 2>&1 || true

cur="$(dconf read /org/gnome/desktop/interface/color-scheme 2>/dev/null || echo "'prefer-dark'")"
if [[ "$cur" == "'prefer-dark'" ]]; then
    tmux source-file "$HOME/.config/tmux/tmux-light.conf" || true
    dconf write /org/gnome/desktop/interface/color-scheme "'prefer-light'"
else
    tmux source-file "$HOME/.config/tmux/tmux.conf" || true
    dconf write /org/gnome/desktop/interface/color-scheme "'prefer-dark'"
fi
